<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Enhanced Lightbox Gallery</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; padding: 20px; }
    .item { margin-bottom: 40px; }
    .item-title { font-size: 24px; margin-bottom: 10px; }
    .item-list { list-style-type: none; padding: 0; }
    .item-list li { display: inline-block; margin-right: 10px; cursor: pointer; }
    .item-list img { width: 120px; height: auto; border-radius: 4px; }

    /* Lightbox Styles */
    .lightbox { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.9); justify-content: center; align-items: center; flex-direction: column; }
    .lightbox.active { display: flex; }
    .lightbox-image { max-width: 90%; max-height: 70%; margin-bottom: 20px; border-radius: 6px; }

    .controls { display: flex; justify-content: space-between; width: 100%; max-width: 600px; margin-bottom: 10px; }
    .controls button { background-color: white; border: none; padding: 10px 20px; cursor: pointer; border-radius: 4px; font-size: 16px; }
    .controls button:hover { background-color: #ddd; }

    .close-btn { position: absolute; top: 20px; right: 20px; background: white; border: none; padding: 10px; cursor: pointer; border-radius: 4px; font-size: 16px; }

    /* Thumbnail Strip */
    .thumbnail-strip { display: flex; overflow-x: auto; width: 100%; max-width: 90%; padding: 10px 0; }
    .thumbnail-strip img { width: 80px; height: auto; margin-right: 10px; cursor: pointer; border: 2px solid transparent; border-radius: 4px; }
    .thumbnail-strip img.active-thumb { border-color: white; }
  </style>
</head>
<body>
  <h1>Enhanced Responsive Lightbox Gallery</h1>

  <div class="item">
    <div class="item-title">Item 1</div>
    <ul class="item-list" data-item-id="item1-list">
      <li><img src="../Photos_Catalog_Peter_Zee/L_Meyer/L_Meyer_Full.jpg" /></li>
      <li><img src="../Photos_Catalog_Peter_Zee/L_Meyer/L_Meyer_R_1.jpg" /></li>
      <li><img src="../Photos_Catalog_Peter_Zee/L_Meyer/L_Meyer_R_2.jpg" /></li>
      <li class="item" data-item-id="item-koekkoek">
    <img src="../Photos_Catalog_Peter_Zee/Koekkoek/Koekkoek_Front.jpg" alt="Marine Painting. Attributed to Hermanus Koekkoek (1815-1882)">
    <div class="item-title">Marine Painting. Attributed to Hermanus Koekkoek (1815-1882)</div>
    <div class="item-dimensions">W 26 H 32</div>
    <div class="gallery-images" style="display:none;">
      <img src="../Photos_Catalog_Peter_Zee/Koekkoek/Koekkoek_Front.jpg">
      <img src="../Photos_Catalog_Peter_Zee/Koekkoek/Koekkoek_Back.jpg">
      <img src="../Photos_Catalog_Peter_Zee/Koekkoek/Koekkoek_Detail(1).jpg">
      <img src="../Photos_Catalog_Peter_Zee/Koekkoek/Koekkoek_Detail(2).jpg">
      <img src="../Photos_Catalog_Peter_Zee/Koekkoek/Koekkoek_Detail(3).jpg">
      <img src="../Photos_Catalog_Peter_Zee/Koekkoek/Koekkoek_Detail(4).jpg">
      <img src="../Photos_Catalog_Peter_Zee/Koekkoek/Koekkoek_Detail(5).jpg">
    </div>
  </li>
</ul>
  </div>

  <div class="item">
    <div class="item-title">Item 2</div>
    <ul class="item-list" data-item-id="item2-list">
      <li><img src="../Photos_Catalog_Peter_Zee/G_Assmann/G_Assmann_Full.jpg" /></li>
      <li><img src="../Photos_Catalog_Peter_Zee/G_Assmann/G_Assmann_R_1.jpg" /></li>
      <li><img src="../Photos_Catalog_Peter_Zee/G_Assmann/G_Assmann_R_2.jpg" /></li>
    </ul>
  </div>

  <!-- LIGHTBOX -->
  <div id="lightbox" class="lightbox">
    <button class="close-btn" id="closeBtn">Close</button>
    <img id="lightbox-image" class="lightbox-image" src="" />

    <div class="controls">
      <button id="prevBtn">Previous</button>
      <button id="nextBtn">Next</button>
    </div>

    <div class="thumbnail-strip" id="thumbnailStrip"></div>
  </div>

  <script>
    let slides = {};
    let currentItem = null;
    let currentIndex = 0;

    document.querySelectorAll('.item-list').forEach(list => {
      const itemId = list.dataset.itemId;
      slides[itemId] = Array.from(list.querySelectorAll('img')).map(img => img.getAttribute('src'));

      list.querySelectorAll('li').forEach((thumbnail, index) => {
        thumbnail.addEventListener('click', () => openLightbox(itemId, index));
      });
    });

    const lightbox = document.getElementById('lightbox');
    const lightboxImage = document.getElementById('lightbox-image');
    const thumbnailStrip = document.getElementById('thumbnailStrip');

    document.getElementById('closeBtn').addEventListener('click', closeLightbox);
    document.getElementById('prevBtn').addEventListener('click', showPrevious);
    document.getElementById('nextBtn').addEventListener('click', showNext);

    /* Keyboard Navigation */
    document.addEventListener('keydown', e => {
      if (!lightbox.classList.contains('active')) return;
      if (e.key === 'ArrowLeft') showPrevious();
      if (e.key === 'ArrowRight') showNext();
      if (e.key === 'Escape') closeLightbox();
    });

    /* Touch Swipe Support */
    let startX = 0;
    lightbox.addEventListener('touchstart', e => { startX = e.touches[0].clientX; });
    lightbox.addEventListener('touchend', e => {
      const endX = e.changedTouches[0].clientX;
      if (endX < startX - 50) showNext();
      if (endX > startX + 50) showPrevious();
    });

    function openLightbox(itemId, index) {
      currentItem = itemId;
      currentIndex = index;
      updateLightbox();
      buildThumbnailStrip();
      highlightThumbnail();
      lightbox.classList.add('active');
    }

    function closeLightbox() { lightbox.classList.remove('active'); }

    function showPrevious() {
      currentIndex = (currentIndex - 1 + slides[currentItem].length) % slides[currentItem].length;
      updateLightbox();
      highlightThumbnail();
    }

    function showNext() {
      currentIndex = (currentIndex + 1) % slides[currentItem].length;
      updateLightbox();
      highlightThumbnail();
    }

    function updateLightbox() {
      lightboxImage.src = slides[currentItem][currentIndex];
    }

    function buildThumbnailStrip() {
      thumbnailStrip.innerHTML = '';
      slides[currentItem].forEach((src, idx) => {
        const img = document.createElement('img');
        img.src = src;
        img.addEventListener('click', () => {
          currentIndex = idx;
          updateLightbox();
          highlightThumbnail();
        });
        thumbnailStrip.appendChild(img);
      });
    }

    function highlightThumbnail() {
      const thumbs = thumbnailStrip.querySelectorAll('img');
      thumbs.forEach((t, i) => t.classList.toggle('active-thumb', i === currentIndex));
    }
  </script>
</body>
</html>
